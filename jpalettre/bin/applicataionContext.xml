<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:p="http://www.springframework.org/schema/p" xmlns:aop="http://www.springframework.org/schema/aop"
		xmlns:context="http://www.springframework.org/schema/context" xmlns:jee="http://www.springframework.org/schema/jee"
		xmlns:tx="http://www.springframework.org/schema/tx"
		xsi:schemaLocation="
			http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
			http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
			http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
			http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-2.5.xsd
			http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">


    	<context:property-placeholder location="classpath:jdbc.properties"/>

	<!-- Connection Pool -->
	<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="driverClass" value="${jdbc.driverClass}"/>
        <property name="jdbcUrl" value="${jdbc.url}"/>
        <property name="user" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
    </bean>

	<!-- JPA EntityManagerFactory --> 
	<bean id="em" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
			p:dataSource-ref="dataSource">
	 <property name="loadTimeWeaver">
        <bean class=
 "org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver"/>
      </property>
	</bean>

	<!-- Transaction manager for a single JPA EntityManagerFactory (alternative to JTA) -->
	<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
			p:entityManagerFactory-ref="em"/>
			
	<!-- Activates various annotations to be detected in bean classes for eg @Autowired-->
	<context:annotation-config/>
	
	  <!-- enable the configuration of transactional behavior based on annotations  -->
	  <tx:annotation-driven transaction-manager="transactionManager"/>

	<!-- Property Configurator -->
    <bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
		<property name="location" value="jdbc.properties"/>
	</bean>
    
     <context:component-scan base-package="dao"/>
     
<bean id="Climetier" class="metier.ClientMetier">
<property name="cd"><ref local="cliDao"/>
</property>
</bean>
<bean id="cliDao" class="dao.ClientDao">

</bean>

<bean id="Lettremetier" class="metier.LettreMetier">

<property name="ld"><ref local="lettreDao"/>
</property>

</bean>
<bean id="lettreDao" class="dao.LettreDao">
</bean>


</beans>
